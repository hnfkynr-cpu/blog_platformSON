@{
    ViewData["Title"] = "Edit Profile";
    Layout = null;

    var displayName = ViewBag.DisplayName as string ?? "Kullanƒ±cƒ±";
    var aboutText = ViewBag.AboutText as string ?? "";
}

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Profile - Novus</title>

    <style>
        /* ================== TEMEL ================== */
        :root {
            --ink: #0b1220;
            --muted: #64748b;
            --muted2: #94a3b8;
            --border: rgba(15, 23, 42, .10);
            --border2: rgba(15, 23, 42, .08);
            --shadow: 0 22px 60px rgba(15, 23, 42, .12);
            --shadow-soft: 0 14px 34px rgba(15, 23, 42, .08);
            --r: 20px;
            /* Soft renk paleti */
            --ocean: #0D8ABC;
            --lav: #a78bfa;
            --pink: #ff7aa2;
            --mint: #37c8a6;
            --sun: #ffd36e;
            --green: #1a8917;
            --glass: rgba(255,255,255,.80);
            --glass2: rgba(255,255,255,.88);
            --bg1: #f7fbff;
            --bg2: #ffffff;
            --bg3: #fbf8ff;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
            margin: 0;
            color: var(--ink);
            background: radial-gradient(980px 520px at 18% 8%, rgba(13,138,188,.14), transparent 60%), radial-gradient(980px 560px at 85% 18%, rgba(167,139,250,.16), transparent 60%), radial-gradient(980px 560px at 62% 92%, rgba(55,200,166,.14), transparent 60%), linear-gradient(180deg, var(--bg1), var(--bg2) 55%, var(--bg3));
            min-height: 100vh;
            overflow-x: hidden;
        }

        .layout-container {
            display: flex;
            min-height: 100vh;
        }

        /* ================== SOL SIDEBAR ================== */
        .sidebar-left {
            width: 300px;
            padding: 28px 26px;
            border-right: 1px solid var(--border);
            position: sticky;
            top: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: rgba(255,255,255,.74);
            backdrop-filter: blur(10px);
        }

        .logo {
            font-size: 28px;
            font-weight: 950;
            letter-spacing: -1.2px;
            color: var(--ink);
            text-decoration: none;
            margin-bottom: 34px;
            position: relative;
            padding-left: 6px;
        }

            .logo::after {
                content: "";
                position: absolute;
                left: 0;
                bottom: -10px;
                width: 86px;
                height: 10px;
                border-radius: 999px;
                background: linear-gradient(90deg, rgba(13,138,188,.22), rgba(167,139,250,.16));
            }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 11px 12px;
            font-size: 15px;
            color: var(--muted);
            text-decoration: none;
            transition: .18s;
            border-radius: 12px;
            margin-bottom: 6px;
        }

            .menu-item:hover {
                color: var(--ink);
                background: rgba(13,138,188,.08);
            }

            .menu-item.active {
                color: var(--ink);
                font-weight: 900;
                background: linear-gradient(90deg, rgba(13,138,188,.14), rgba(167,139,250,.10));
                box-shadow: 0 12px 22px rgba(13,138,188,.08);
            }

        .menu-icon {
            width: 26px;
            margin-right: 14px;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .write-btn {
            color: var(--green) !important;
            font-weight: 900;
        }

        .menu-group {
            margin-top: 22px;
            padding-top: 18px;
            border-top: 1px solid var(--border);
        }

        .footer-note {
            margin-top: auto;
            font-size: 11px;
            color: rgba(148,163,184,.95);
        }

        /* ================== ORTA ALAN ================== */
        .main-content {
            flex: 1;
            padding: 54px 90px; /* daha dolu */
            max-width: 900px; /* geni≈ülettik */
            text-align: center;
            position: relative;
        }

            .main-content::before {
                content: "";
                position: absolute;
                inset: -40px -60px auto -60px;
                height: 260px;
                background: radial-gradient(240px 160px at 18% 45%, rgba(255,122,162,.14), transparent 60%), radial-gradient(260px 160px at 60% 20%, rgba(167,139,250,.14), transparent 60%), radial-gradient(240px 160px at 85% 70%, rgba(55,200,166,.12), transparent 60%);
                pointer-events: none;
                filter: blur(2px);
                z-index: 0;
            }

        .page-title {
            position: relative;
            z-index: 1;
            margin: 6px 0 10px;
            font-size: 46px;
            font-weight: 950;
            letter-spacing: -0.9px;
            font-family: ui-serif, Georgia, serif;
            color: var(--ink);
        }

        .page-sub {
            position: relative;
            z-index: 1;
            margin: 0 auto 26px;
            color: var(--muted);
            font-size: 15px;
            line-height: 1.7;
            max-width: 640px;
        }

        .card {
            position: relative;
            z-index: 1;
            background: var(--glass2);
            border: 1px solid var(--border);
            border-radius: var(--r);
            box-shadow: var(--shadow);
            backdrop-filter: blur(12px);
            overflow: hidden;
            text-align: left;
        }

        .card-head {
            padding: 18px 20px 16px;
            border-bottom: 1px solid rgba(15,23,42,.08);
            background: linear-gradient(90deg, rgba(13,138,188,.12), rgba(167,139,250,.10), rgba(55,200,166,.10));
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }

            .card-head > div {
                font-weight: 950 !important;
                letter-spacing: -.2px;
                color: var(--ink);
            }

        .card-body {
            padding: 20px;
            display: grid;
            gap: 14px;
        }

        .field {
            text-align: left;
        }

        .label {
            display: block;
            font-weight: 900;
            margin-bottom: 8px;
            font-size: 13px;
            color: rgba(15,23,42,.92);
            letter-spacing: .2px;
        }

        .input {
            width: 100%;
            padding: 13px 14px;
            border-radius: 16px;
            border: 1px solid rgba(15,23,42,.14);
            background: rgba(255,255,255,.92);
            outline: none;
            font-size: 14.5px;
            transition: .18s ease;
            resize: vertical;
            box-shadow: 0 10px 18px rgba(15,23,42,.04);
        }

            .input:focus {
                border-color: rgba(13,138,188,.35);
                box-shadow: 0 0 0 5px rgba(13,138,188,.12), 0 18px 44px rgba(13,138,188,.10);
                background: rgba(255,255,255,.98);
            }

        .hint {
            color: var(--muted);
            font-size: 12.7px;
            margin-top: 8px;
            line-height: 1.45;
        }

        .actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            flex-wrap: wrap;
            margin-top: 8px;
            padding-top: 12px;
            border-top: 1px dashed rgba(15,23,42,.10);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            border-radius: 14px;
            border: 1px solid rgba(15,23,42,.12);
            padding: 11px 15px;
            font-weight: 950;
            font-size: 13.5px;
            cursor: pointer;
            background: rgba(255,255,255,.92);
            transition: .18s ease;
            user-select: none;
            text-decoration: none;
            color: rgba(15,23,42,.92);
            box-shadow: 0 12px 22px rgba(15,23,42,.06);
        }

            .btn:hover {
                transform: translateY(-1px);
                box-shadow: 0 16px 34px rgba(15,23,42,.10);
                border-color: rgba(13,138,188,.20);
            }

            .btn:active {
                transform: translateY(0px);
            }

        .btnPrimary {
            border-color: rgba(26,137,23,.30);
            background: linear-gradient(135deg, rgba(55,200,166,.22), rgba(255,211,110,.20));
            color: #0b4d3f;
        }

        .btnGhost {
            border-color: rgba(15,23,42,.12);
            background: rgba(255,255,255,.88);
            color: rgba(15,23,42,.86);
        }

        /* ================== SAƒû PANEL (PREVIEW) ================== */
        .sidebar-right {
            width: 340px;
            border-left: 1px solid var(--border);
            padding: 44px 40px;
            background: rgba(255,255,255,.74);
            backdrop-filter: blur(10px);
        }

        .preview-card {
            background: rgba(255,255,255,.86);
            border: 1px solid rgba(15,23,42,.10);
            border-radius: 20px;
            box-shadow: var(--shadow-soft);
            padding: 20px 18px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

            .preview-card::before {
                content: "";
                position: absolute;
                inset: -20px -20px auto -20px;
                height: 160px;
                background: radial-gradient(220px 140px at 20% 50%, rgba(13,138,188,.14), transparent 60%), radial-gradient(220px 140px at 75% 10%, rgba(167,139,250,.14), transparent 60%), radial-gradient(220px 140px at 85% 80%, rgba(255,122,162,.12), transparent 60%);
                pointer-events: none;
                filter: blur(2px);
            }

        .avatar {
            width: 96px;
            height: 96px;
            border-radius: 999px;
            margin: 0 auto 14px;
            display: grid;
            place-items: center;
            color: #fff;
            font-weight: 950;
            letter-spacing: .6px;
            font-size: 28px;
            background: linear-gradient(135deg, rgba(13,138,188,.95), rgba(167,139,250,.85), rgba(255,122,162,.70));
            border: 2px solid rgba(255,255,255,.9);
            box-shadow: 0 18px 46px rgba(13,138,188,.16);
            position: relative;
            z-index: 1;
        }

        .preview-name {
            position: relative;
            z-index: 1;
            font-weight: 950;
            font-size: 18px;
            margin: 0 0 6px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            color: var(--ink);
        }

        .preview-sub {
            position: relative;
            z-index: 1;
            margin: 0;
            color: var(--muted);
            font-size: 13.2px;
            line-height: 1.6;
            white-space: pre-line;
        }

        /* Responsive */
        @@media (max-width: 1100px) {
            .sidebar-right {
                display: none;
            }

            .main-content {
                max-width: 980px;
                padding: 44px 50px;
            }
        }

        @@media (max-width: 720px) {
            .sidebar-left {
                display: none;
            }

            .main-content {
                padding: 28px 18px;
                max-width: 100%;
            }

            .page-title {
                font-size: 34px;
            }

            .card-body {
                padding: 18px;
            }
        }
    </style>

</head>

<body>
    <div class="layout-container">

        <!-- SOL MEN√ú -->
        <nav class="sidebar-left">
            <a href="/Home/Index" class="logo">NOVUS</a>

            <a href="/Home/Index" class="menu-item"><span class="menu-icon">üè†</span>Home</a>
            <a href="/Home/Library" class="menu-item"><span class="menu-icon">üìö</span>Library</a>
            <a href="/Home/Profile" class="menu-item active"><span class="menu-icon">üë§</span>Profile</a>

            <div class="menu-group">
                <a href="/Home/Stories" class="menu-item"><span class="menu-icon">üìù</span>Stories</a>
                <a href="/Home/Stats" class="menu-item"><span class="menu-icon">üìä</span>Stats</a>
                <a href="/Home/Write" class="menu-item write-btn"><span class="menu-icon">‚úçÔ∏è</span>Write</a>
            </div>

            <div class="footer-note">
                ¬© 2025 Novus
            </div>
        </nav>

        <!-- ORTA -->
        <main class="main-content">
            <h1 class="page-title">Edit Profile</h1>
            <p class="page-sub">
                Profilini ki≈üiselle≈ütir: g√∂r√ºnen ismini deƒüi≈ütir, kaydet ve sitedeki t√ºm alanlarda aynƒ± isim g√∂r√ºns√ºn.
            </p>

            <div class="card">
                <div class="card-head">
                    <div style="font-weight:900;">Profil Bilgileri</div>
                </div>

                <div class="card-body">
                    <form method="post" action="/Home/UpdateProfile">
                        @Html.AntiForgeryToken()

                        <!-- ‚úÖ G√ñR√úNEN ƒ∞Sƒ∞M -->
                        <div class="field">
                            <label class="label">G√∂r√ºnen ƒ∞sim</label>
                            <input id="displayNameInput"
                                   class="input"
                                   name="displayName"
                                   value="@displayName"
                                   maxlength="40"
                                   placeholder="√ñrn: Zeynep Selime Kartal" />
                            <div class="hint">2‚Äì40 karakter arasƒ± √∂nerilir. Kaydettikten sonra profil sayfan ve diƒüer alanlar g√ºncellenir.</div>
                        </div>

                        <!-- ‚úÖ ABOUT (BURAYA EKLENDƒ∞) -->
                        <div class="field" style="margin-top:12px;">
                            <label class="label">Hakkƒ±mda (About)</label>
                            <textarea id="aboutInput"
                                      class="input"
                                      name="aboutText"
                                      maxlength="900"
                                      rows="5"
                                      placeholder="Kendinden kƒ±saca bahset...">@aboutText</textarea>
                            <div class="hint">Maksimum 900 karakter. Kaydettikten sonra profilinde g√∂r√ºn√ºr.</div>
                        </div>

                        <div class="actions">
                            <a class="btn btnGhost" href="/Home/Profile">‚Ü©Ô∏è Geri d√∂n</a>
                            <button type="submit" class="btn btnPrimary">üíæ Kaydet</button>
                        </div>
                    </form>
                </div>
            </div>
        </main>

        <!-- SAƒû (√ñNƒ∞ZLEME) -->
        <aside class="sidebar-right">
            <div class="preview-card">
                <div class="avatar" id="avatarInitials">NV</div>
                <p class="preview-name" id="previewName">@displayName</p>
               
            </div>
        </aside>

    </div>

    <script>
        (function(){
            const input = document.getElementById("displayNameInput");
            const about = document.getElementById("aboutInput");
            const preview = document.getElementById("previewName");
            const previewAbout = document.getElementById("previewAbout");
            const avatar = document.getElementById("avatarInitials");

            function initialsFrom(name){
                if(!name) return "NV";
                const parts = name.trim().split(/\s+/).filter(Boolean);
                if(parts.length === 1) return parts[0].slice(0,2).toUpperCase();
                return (parts[0][0] + parts[parts.length-1][0]).toUpperCase();
            }

            function sync(){
                const val = input ? input.value : "";
                if(preview) preview.textContent = val || "Kullanƒ±cƒ±";
                if(avatar) avatar.textContent = initialsFrom(val);

                const aboutVal = about ? about.value : "";
                if(previewAbout) previewAbout.textContent = aboutVal || "";
            }

            if(input) input.addEventListener("input", sync);
            if(about) about.addEventListener("input", sync);
            sync();
        })();
    </script>

</body>
</html>
